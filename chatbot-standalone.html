<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Bubble AI Investment Assistant</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="chatbot-styles.css" />
  <link rel="icon" href="bubble-favicon.svg" type="image/svg+xml" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <script src="translations.js"></script>
  <script src="chatbot-logic.js" defer></script>
</head>
<body>
  <header class="chatbot-header">
    <div class="header-left">
      <div class="brand">
        <img src="bubble-logo-single.svg" alt="Bubble Logo" class="chatbot-logo" id="main-logo" />
        <span class="chatbot-title">Bubble AI</span>
        <span class="chatbot-subtitle" id="chatbot-subtitle" data-translate="hero.tagline" style="font-style:italic;margin-left:1rem;"></span>
      </div>
    </div>
    
    <div class="header-center">
      <div class="chatbot-status" id="chatbot-status">‚óè Online</div>
    </div>
    
    <div class="header-right">
      <div class="language-switcher">
        <button id="en-switch" class="active">EN</button>
        <span>|</span>
        <button id="fr-switch">FR</button>
      </div>
      
      <div class="auth-buttons">
        <button class="btn-secondary" data-translate="header.signIn">Sign In</button>
        <button class="btn-primary" data-translate="header.login">Log In</button>
      </div>
      
      <div class="action-buttons">
        <button class="btn-accent btn-violet" id="join-waitlist-btn" data-translate="header.joinWaitlist">Join Waitlist</button>
        <button class="btn-outline" id="learn-more-btn" data-translate="header.learnMore">Learn More</button>
      </div>
    </div>
  </header>

  <div class="chatbot-layout">
    <aside class="chatbot-sidebar" id="chatbot-sidebar">
      <!-- Enhanced History Section -->
      <div class="sidebar-section chatbot-history">
        <div class="section-header">
          <h3 data-translate="sidebar.history">Chat History</h3>
          <button id="new-chat-btn" class="btn-new-chat btn-violet" data-translate="sidebar.newChat">+ New Chat</button>
        </div>
        <div id="chatbot-history-list" class="history-list">
          <!-- History items will be populated by JavaScript -->
        </div>
      </div>
      
      <!-- Portfolio Widget -->
      <div class="sidebar-section chatbot-portfolio">
        <h3 data-translate="sidebar.portfolio">Portfolio Overview</h3>
        <div id="chatbot-portfolio-widget" class="portfolio-widget">
          <!-- Mock portfolio data for demo -->
          <div class="portfolio-stat">
            <span class="stat-label">Total Value</span>
            <span class="stat-value">$127,834.56</span>
            <span class="stat-change positive">+2.34%</span>
          </div>
          <div class="portfolio-stat">
            <span class="stat-label">Today's P&L</span>
            <span class="stat-value">+$2,891.23</span>
            <span class="stat-change positive">+2.31%</span>
          </div>
          <div class="portfolio-stat">
            <span class="stat-label">Cash</span>
            <span class="stat-value">$8,234.12</span>
          </div>
        </div>
      </div>
      
      <!-- Quick Actions -->
      <div class="sidebar-section chatbot-quickactions">
        <h3 data-translate="chatbot.sidebar.quickactions">Quick Actions</h3>
        <div id="chatbot-quickactions" class="quick-actions">
          <button class="quick-action-btn"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="-5 -10 110 135" width="22" height="22"><path d="m96.359 7.1484h-92.719c-0.55469 0-1.0078 0.45312-1.0078 1.0078v63.398c0 0.55859 0.45313 1.0078 1.0078 1.0117h92.719c0.55469-0.003906 1.0078-0.45312 1.0078-1.0117v-63.398c0-0.55469-0.45313-1.0078-1.0078-1.0078zm-3.543 4.5508v54.211h-85.633v-54.211zm-85.711-2.332h85.789c0.59766 0 1.168 0.23828 1.5859 0.66406h0.007812c0.42188 0.41797 0.66016 0.98828 0.66016 1.5859v54.363c0 0.59766-0.23828 1.1719-0.66016 1.5938-0.03125 0.027343-0.058593 0.054687-0.089843 0.082031h-0.003907c-0.41016 0.37109-0.94531 0.57812-1.5 0.57812h-85.789c-0.59766 0-1.168-0.23828-1.5859-0.66016-0.42578-0.42188-0.66016-0.99609-0.66016-1.5938v-54.359c0-0.59766 0.23438-1.168 0.66016-1.5859 0.41797-0.42578 0.98828-0.66406 1.5859-0.66797zm57.133 75.34h-28.477c-2.6289 0.007813-4.7578 2.1367-4.7617 4.7656v3.3789h38v-3.3789c-0.003906-2.625-2.1328-4.7539-4.7578-4.7617zm-4.7734-9.8125h-18.93v7.4805l18.93 0.003906zm-19.254-27.406v12.879h-5.0469v-12.879zm-6.2109-2.332h7.3672c0.64453 0 1.1641 0.52344 1.168 1.1641v15.211c-0.003906 0.64453-0.52344 1.1641-1.168 1.1641h-7.3672c-0.30859 0-0.60547-0.12109-0.82422-0.33984s-0.33984-0.51562-0.33984-0.82422v-15.207c0-0.30859 0.12109-0.60547 0.33984-0.82422s0.51562-0.34375 0.82422-0.34375zm17.352-8.6172v23.828h-5.043v-23.824zm-6.2109-2.3281h7.3672c0.3125-0.003907 0.60938 0.12109 0.83203 0.33984 0.21875 0.21875 0.34375 0.51562 0.34375 0.82812v26.152c0 0.64453-0.52344 1.1641-1.1641 1.1641h-7.3672c-0.64453 0-1.168-0.51953-1.168-1.1641v-26.152c0-0.64453 0.51953-1.1641 1.1602-1.168zm17.355 8.457v17.699h-5.043v-17.699zm-6.207-2.3281h7.3672c0.64453 0 1.1641 0.52344 1.1641 1.1641v20.027c0 0.64453-0.51953 1.1641-1.1641 1.1641h-7.3672c-0.30859 0-0.60547-0.12109-0.82422-0.33984s-0.33984-0.51562-0.33984-0.82422v-20.027c0-0.30859 0.12109-0.60547 0.33984-0.82422s0.51562-0.33984 0.82422-0.33984zm17.352-5.8828v25.91h-5.043v-25.91zm-6.2109-2.3281h7.3672c0.64453 0 1.1641 0.51953 1.168 1.1641v28.238c-0.003906 0.64453-0.52344 1.1641-1.168 1.1641h-7.3672c-0.64453 0-1.1641-0.51953-1.1641-1.1641v-28.238c0-0.64453 0.51953-1.1641 1.1641-1.1641zm11.148-6.2812h7.3711c0.64062 0 1.1641 0.51953 1.1641 1.1641v34.527c0 0.64063-0.52344 1.1641-1.1641 1.1641h-7.3711c-0.30859 0-0.60547-0.125-0.82422-0.33984-0.21875-0.21875-0.33984-0.51562-0.33984-0.82422v-34.527c0-0.30859 0.12109-0.60547 0.33984-0.82422s0.51562-0.33984 0.82422-0.33984zm6.207 2.3281v32.191h-5.043v-32.191zm-7.9922-10.949h-0.003907c-0.63672-0.019531-1.1406-0.55469-1.1211-1.1914 0.019531-0.64062 0.55469-1.1445 1.1953-1.1211l5.4102 0.17188v-0.003907c0.066406 0.003907 0.13672 0.007813 0.20312 0.019531h0.023438c0.089844 0.019532 0.17969 0.050782 0.26172 0.089844l0.019531 0.007813 0.011719 0.003906 0.015625 0.007813 0.011718 0.003906 0.015626 0.007812 0.011718 0.007813 0.015625 0.007812 0.007813 0.007813 0.011718 0.007812 0.015626 0.007813h0.007812l0.039062 0.03125c0.019532 0.015625 0.042969 0.03125 0.0625 0.050781l0.019532 0.015625 0.015625 0.015625 0.019531 0.015625 0.039062 0.039063-0.011718-0.003907c0.10156 0.10938 0.17969 0.23438 0.23438 0.37109l0.019531 0.050781 0.007812 0.019532 0.015626 0.046874 0.003906 0.019532v0.12891h-0.003906c0.019531 0.14453 0.007812 0.29297-0.027344 0.43359l-1.3516 5.293c-0.16406 0.62109-0.79688 0.99219-1.418 0.82813-0.62109-0.16406-0.99219-0.79688-0.82812-1.418l0.52734-1.9609-19.551 15.008c-0.36719 0.30469-0.88281 0.35547-1.3047 0.125l-10.387-5.7109-10.527 10.34c-0.45703 0.44922-1.1914 0.44141-1.6406-0.015625s-0.44531-1.1914 0.011719-1.6406l11.145-10.949c0.36328-0.35547 0.92188-0.43359 1.3672-0.1875l10.48 5.7617 19.113-14.668-2.1875-0.070312zm-54.379 8.8789c-0.53125-0.30469-0.83984-0.89062-0.78906-1.5 0-0.51562 0.20312-1.0156 0.57031-1.3789 0.066407-0.070312 0.14063-0.13281 0.21875-0.1875zm2.3281 3.2383c0.53125 0.30469 0.83984 0.88672 0.78906 1.5 0 0.51562-0.20703 1.0117-0.57422 1.3789-0.066406 0.066406-0.13672 0.12891-0.21484 0.1875zm-2.3281-9.5977c-0.011718-0.31641 0.10938-0.62109 0.32813-0.84766 0.21875-0.22656 0.51953-0.35547 0.83594-0.35547 0.3125 0 0.61719 0.12891 0.83594 0.35547 0.21875 0.22656 0.33594 0.53125 0.32813 0.84766v0.73828-0.003906c1.8438 0.52344 3.1172 2.207 3.1172 4.125-0.019531 0.62891-0.53516 1.1289-1.1641 1.1289-0.62891 0-1.1445-0.5-1.1641-1.1289 0-0.51953-0.20703-1.0156-0.57422-1.3828-0.066406-0.066406-0.13672-0.12891-0.21484-0.1875v3.7773c1.668 0.46094 3.1172 1.2266 3.1172 4.0273 0 1.918-1.2734 3.6016-3.1172 4.1211v0.73828c-0.019532 0.62891-0.53516 1.1289-1.1641 1.1289s-1.1484-0.5-1.1641-1.1289v-0.73828c-1.8438-0.51953-3.1172-2.2031-3.1211-4.1172-0.007813-0.31641 0.10938-0.62109 0.33203-0.84766 0.21875-0.22656 0.51953-0.35547 0.83594-0.35547 0.3125 0 0.61719 0.12891 0.83594 0.35547 0.21875 0.22656 0.33594 0.53125 0.32812 0.84766 0 0.51562 0.20312 1.0117 0.57031 1.3789 0.066407 0.066406 0.14063 0.12891 0.21875 0.1875v-3.7773c-1.668-0.46094-3.1172-1.2266-3.1172-4.0273h-0.003906c0.003906-1.918 1.2773-3.6016 3.1211-4.125v-0.73828zm9.6953-0.55078h-0.003906c4.0703 4.0703 4.7031 10.445 1.5039 15.234-3.1953 4.7852-9.332 6.6445-14.648 4.4453-5.3164-2.2031-8.3398-7.8555-7.2148-13.504 1.1211-5.6445 6.0781-9.7109 11.832-9.707 3.1992-0.003906 6.2695 1.2656 8.5273 3.5312zm-8.5273-5.8633h-0.003906c4.4766 0 8.6953 2.0859 11.418 5.6328 2.7227 3.5508 3.6406 8.168 2.4805 12.488-1.1602 4.3203-4.2656 7.8594-8.3984 9.5703-4.1328 1.7109-8.8281 1.3984-12.703-0.83984-3.875-2.2383-6.4844-6.1523-7.0664-10.586-0.58594-4.4375 0.92969-8.8906 4.0938-12.055 2.6992-2.6992 6.3594-4.2148 10.176-4.2109z" fill-rule="evenodd"/></svg></span> Portfolio Summary</button>
<button class="quick-action-btn"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 160" width="22" height="22"><path d="M123.4,61.4L105,24.8c0.9,0,1.7-0.1,2.6-0.1c0.9-0.1,1.8-0.5,2.4-1.1c0.6-0.6,1-1.5,1-2.5c0-1.9-1.5-3.5-3.4-3.6  c-6.7-0.4-13.4-0.6-20.1-0.8c-7.8-0.2-15.6-0.3-23.5-0.3H64h-0.1c-7.8,0-15.6,0.1-23.5,0.3c-6.7,0.2-13.4,0.4-20.1,0.8  c-1.9,0.1-3.4,1.7-3.4,3.6c0,0.9,0.4,1.8,1,2.5c0.6,0.6,1.4,1.1,2.4,1.1c0.9,0,1.7,0.1,2.6,0.1L4.6,61.4H2.8v3.9c0,7,5,13,11.9,14.3  c0,0,0.1,0,0.1,0c4.3,0.8,17.9,0.8,22.2,0c0,0,0.1,0,0.1,0c6.9-1.3,11.9-7.3,11.9-14.3v-3.9h-1.8L28.9,25.1  c3.9,0.2,7.7,0.3,11.6,0.4c6,0.1,12.1,0.2,18.1,0.2l-5.2,69.9c-7.7,0.2-13.9,6.5-13.9,14.3v1.5H64h24.5v-1.5  c0-7.8-6.2-14.1-13.9-14.3l-5.2-69.9c6,0,12.1-0.1,18.1-0.2c3.9-0.1,7.7-0.2,11.6-0.4L80.9,61.4h-1.8v3.9c0,7,5,13,11.9,14.3  c0,0,0.1,0,0.1,0c4.3,0.8,17.9,0.8,22.2,0c0,0,0.1,0,0.1,0c6.9-1.3,11.9-7.3,11.9-14.3v-3.9H123.4z M41.6,61.4H10.2l15.7-31.3  L41.6,61.4z M86.4,61.4l15.7-31.3l15.7,31.3H86.4z"/></svg></span> Check Balance</button>
<button class="quick-action-btn"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="-5 -10 110 135" width="22" height="22"><path d="m89.379 59.859c-2.8711-1.2148-6.1875 0.12891-7.4062 3-5.1875 12.266-17.141 20.188-30.457 20.188-18.227 0-33.051-14.824-33.051-33.051 0-18.227 14.828-33.047 33.055-33.047 6.6953 0 13.113 2.0352 18.508 5.6797h-1.8438c-3.1172 0-5.6484 2.5312-5.6484 5.6484 0 3.1172 2.5312 5.6484 5.6484 5.6484h21.016l0.003906-21.016c0-3.1172-2.5312-5.6484-5.6484-5.6484-3.1172 0-5.6484 2.5312-5.6484 5.6484v1.4414c-7.5352-5.5781-16.75-8.6992-26.383-8.6992-24.457-0.003906-44.355 19.891-44.355 44.348s19.895 44.352 44.352 44.352c17.863 0 33.902-10.633 40.863-27.086 1.2148-2.875-0.12891-6.1875-3-7.4062z"/><path d="m48.809 30.484c-2.3398 0-4.2383 1.8984-4.2383 4.2383v21.066l10.762 10.762c0.82422 0.82422 1.9102 1.2422 2.9961 1.2422s2.168-0.41406 2.9961-1.2422c1.6562-1.6562 1.6562-4.3398 0-5.9961l-8.2812-8.2812v-17.555c0-2.3398-1.8984-4.2383-4.2383-4.2383z"/></svg></span> Recent Trades</button>
<button class="quick-action-btn"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 125" width="22" height="22"><path d="M96.0805283,75.8052826l-37.055481-62.3076477c-1.9071312-3.213995-5.3680573-5.1838341-9.1056633-5.1838341  c-3.7376099,0-7.1984444,1.9697466-9.1056633,5.1838341L3.9185569,75.8052826  c-1.8835053,3.2611847-1.8917675,7.2786026-0.0224507,10.5482559c1.8693218,3.2696457,5.3350806,5.3005905,9.1008263,5.3326569  h74.1109695c3.7469864-0.0685349,7.1793823-2.1139221,9.0227814-5.3774261  c1.843338-3.2636108,1.8243942-7.257431-0.0496292-10.5034866H96.0805283z M50.0530815,81.0989227  c-1.4037514,0-2.7508202-0.5577469-3.7433624-1.5502853c-0.9925385-0.9925385-1.5502777-2.3396072-1.5502777-3.7433548  c0-1.4037552,0.5577393-2.750824,1.5502777-3.7433624c0.9925423-0.9925385,2.3396111-1.5502777,3.7433624-1.5502777  s2.7508202,0.5577393,3.7433586,1.5502777s1.5502815,2.3396072,1.5502815,3.7433624  c0,1.4037476-0.5577431,2.7508163-1.5502815,3.7433548S51.4568329,81.0989227,50.0530815,81.0989227z M55.3467216,57.2775421  c0,1.8917656-1.0090904,3.6393051-2.6468201,4.5845947c-1.6377296,0.9452934-3.655941,0.9452934-5.2936401,0  c-1.6377029-0.9452896-2.6468201-2.692894-2.6468201-4.5845947V36.1029854c0-1.8917656,1.0090904-3.6393013,2.6468201-4.5845947  s3.6559372-0.9452934,5.2936401,0c1.6376991,0.9452934,2.6468201,2.6928902,2.6468201,4.5845947V57.2775421z"/></svg></span> Alerts</button>
        </div>
      </div>
      
      <!-- Settings -->
      <div class="sidebar-section chatbot-settings">
        <h3 data-translate="chatbot.sidebar.settings">Settings</h3>
        <div id="chatbot-settings" class="settings-list">
          <button class="setting-item"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 112.5" width="22" height="22"><path d="M55.434,72.521c0,3.712-1.979,6.553-5.193,8.41c-3.213,1.856-7.172,1.856-10.379,0c-3.215-1.857-5.193-4.698-5.193-8.41"/><path d="M45.049,7.708c2.832,0,5.113,1.746,5.113,4.431c0,1.69,0.059,2.951,1.121,3.274c9.031,2.727,14.822,9.119,14.822,17.42  v13.952c0,6.392,2.615,7.686,5.906,10.131c4.766,3.535,3.678,10.896-1.791,10.891h-50.34c-5.469,0.005-6.557-7.356-1.791-10.891  c3.287-2.445,5.906-3.739,5.906-10.131V32.833c0-8.301,5.791-14.693,14.822-17.42c1.059-0.323,1.121-1.584,1.121-3.274  C39.939,9.454,42.221,7.708,45.049,7.708z"/></svg></span> Notifications</button>
<button class="setting-item"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 80" width="22" height="22"><g data-name="Paint Roller"><path d="M44.625,4.635h-32a1.9931,1.9931,0,0,0-2,2v11a1.99946,1.99946,0,0,0,2,2h32a2.00587,2.00587,0,0,0,2-2v-11A1.99943,1.99943,0,0,0,44.625,4.635Zm-28.37,3.69h-2a1,1,0,0,1,0-2h2A1,1,0,0,1,16.255,8.325Zm13.28,0h-10a1,1,0,0,1,0-2h10A1,1,0,0,1,29.535,8.325Z"/><path d="M53.375,15.385v7.38a5.00181,5.00181,0,0,1-5,5h-13.5a1.99943,1.99943,0,0,0-2,2v2.6h-4v-2.6a6.00476,6.00476,0,0,1,6-6h13.5a1.00291,1.00291,0,0,0,1-1v-7.38a.98767.98767,0,0,0-.75-.96v-4.03A4.99149,4.99149,0,0,1,53.375,15.385Z"/><path d="M35.375,55.295a4.29681,4.29681,0,0,1-4.5,4.07,4.29681,4.29681,0,0,1-4.5-4.07l1.07-19.98a1.007,1.007,0,0,1,1-.95h4.86a1.00692,1.00692,0,0,1,1,.95Z"/><path d="M18.99189,28.40844a2.64928,2.64928,0,1,1-5.29856,0c0-1.62478,2.133-3.51368,2.61325-5.46662a.03628.03628,0,0,1,.07206,0C16.85885,24.89476,18.99189,26.78366,18.99189,28.40844Z"/></g></svg></span> Theme</button>
<button class="setting-item"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 333.33 416.66" width="22" height="22"><g><path d="M117.86 142.4l97.61 0 0 -52.46c0,-26.84 -21.96,-48.81 -48.81,-48.81l0 0c-26.85,0 -48.81,21.96 -48.81,48.81l0 52.46zm130.31 2.54c20.87,6.8 36.07,26.48 36.07,49.54l0 78.32c0,28.65 -23.44,52.09 -52.09,52.09l-130.97 0c-28.65,0 -52.09,-23.44 -52.09,-52.09l0 -78.32c0,-23.06 15.2,-42.75 36.07,-49.54l0 -55c0,-44.82 36.68,-81.5 81.5,-81.5l0 0c44.83,0 81.5,36.68 81.5,81.5l0 55zm-81.5 38.77c-15.31,0 -27.73,12.42 -27.73,27.73 0,10.57 5.91,19.76 14.61,24.44l0 34.58c0,7.22 5.9,13.12 13.11,13.12l0 0c7.21,0 13.11,-5.9 13.11,-13.12l0 -34.58c8.7,-4.68 14.61,-13.87 14.61,-24.44 0,-15.31 -12.41,-27.73 -27.73,-27.73z"/></g></svg></span> Privacy</button>
        </div>
      </div>
    </aside>

    <main class="chatbot-main">
      <!-- Welcome Screen -->
      <section class="chatbot-welcome" id="chatbot-welcome">
        <div class="welcome-content">
          <div class="welcome-icon">
            <img src="bubble-logo-single.svg" alt="Bubble AI" class="welcome-logo" id="welcome-logo" />
          </div>
          <h2 data-translate="chatbot.welcome.title">Welcome to Your AI Investment Assistant</h2>
          <p data-translate="chatbot.welcome.description">
            I'm your personal AI portfolio manager. Ask me about your investments, 
            recent trades, market positions, or any questions about your financial portfolio.
          </p>
          <div class="welcome-features">
            <div class="feature-item">
              <span class="feature-icon welcome-feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 80" width="32" height="32"><g><path d="M58.25,33H31.26V6.02c0-0.75-0.59-1.34-1.34-1.34c-16.36,0-29.66,13.31-29.66,29.66C0.26,50.69,13.57,64,29.92,64   c16.36,0,29.67-13.31,29.67-29.66C59.59,33.6,58.99,33,58.25,33z"/><path d="M34.08,0c-0.74,0-1.34,0.6-1.34,1.34v28.32c0,0.74,0.6,1.34,1.34,1.34H62.4c0.74,0,1.34-0.6,1.34-1.34   C63.74,13.31,50.43,0,34.08,0z"/></g></svg></span>
              <span>Real-time Portfolio Analysis</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon welcome-feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="-5 -10 110 135" width="32" height="32"><g fill="black"><path d="m18.43 1.8359c0.14453-1.1133 1.7617-1.1133 1.9023 0 1.1055 8.668 7.9297 15.488 16.594 16.594 1.1172 0.14453 1.1172 1.7617 0 1.9023-8.6641 1.1055-15.488 7.9297-16.594 16.594-0.14062 1.1172-1.7578 1.1172-1.9023 0-1.1055-8.6641-7.9258-15.488-16.594-16.594-1.1133-0.14062-1.1133-1.7578 0-1.9023 8.668-1.1055 15.488-7.9258 16.594-16.594z"/><path d="m58.293 23.434c0.25781-2.0117 3.1719-2.0117 3.4258 0 2.3242 18.203 16.66 32.539 34.863 34.859 2.0117 0.25781 2.0117 3.1719 0 3.4258-18.203 2.3242-32.539 16.66-34.863 34.863-0.25391 2.0117-3.168 2.0117-3.4258 0-2.3203-18.203-16.656-32.539-34.859-34.863-2.0117-0.25391-2.0117-3.168 0-3.4258 18.203-2.3203 32.539-16.656 34.859-34.859z"/></g></svg></span>
              <span>AI-Powered Insights</span>
            </div>
            <div class="feature-item">
              <span class="feature-icon welcome-feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 333.33 416.66" width="32" height="32"><g><path d="M117.86 142.4l97.61 0 0 -52.46c0,-26.84 -21.96,-48.81 -48.81,-48.81l0 0c-26.85,0 -48.81,21.96 -48.81,48.81l0 52.46zm130.31 2.54c20.87,6.8 36.07,26.48 36.07,49.54l0 78.32c0,28.65 -23.44,52.09 -52.09,52.09l-130.97 0c-28.65,0 -52.09,-23.44 -52.09,-52.09l0 -78.32c0,-23.06 15.2,-42.75 36.07,-49.54l0 -55c0,-44.82 36.68,-81.5 81.5,-81.5l0 0c44.83,0 81.5,36.68 81.5,81.5l0 55zm-81.5 38.77c-15.31,0 -27.73,12.42 -27.73,27.73 0,10.57 5.91,19.76 14.61,24.44l0 34.58c0,7.22 5.9,13.12 13.11,13.12l0 0c7.21,0 13.11,-5.9 13.11,-13.12l0 -34.58c8.7,-4.68 14.61,-13.87 14.61,-24.44 0,-15.31 -12.41,-27.73 -27.73,-27.73z"/></g></svg></span>
              <span>Secure & Private</span>
            </div>
          </div>
          <button id="start-chat-btn" class="chatbot-start-btn btn-violet" data-translate="chatbot.welcome.start">Start Managing Your Portfolio</button>
        </div>
      </section>

      <!-- Enhanced Chat Container -->
      <section class="chatbot-chat-container" id="chatbot-chat-container" style="display:none;">
        <!-- Chat Messages Area -->
        <div class="chatbot-message-list" id="chatbot-message-list">
          <!-- Messages will be populated by JavaScript -->
        </div>
        
        <!-- Enhanced Input Area -->
        <div class="chatbot-input-area">
          <!-- Investment-focused suggestions -->
          <div class="chatbot-suggestions" id="chatbot-suggestions">
            <!-- Suggestion buttons will be populated by JavaScript -->
          </div>
          
          <div class="chatbot-input-row">
            <div class="input-container">
              <input 
                type="text" 
                class="chatbot-input" 
                id="chatbot-input" 
                placeholder="Ask about your portfolio performance..." 
                data-translate="chat.placeholder" 
                aria-label="Ask about your investments" 
                autocomplete="off" 
              />
              <div class="input-status">
                <span class="typing-indicator" style="display: none;">
                  <span></span>
                  <span></span>
                  <span></span>
                </span>
              </div>
            </div>
            <button class="chatbot-send-btn" id="chatbot-send-btn" aria-label="Send">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 10L12 3L19 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 21V4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
          </div>
          
          <!-- Quick Action Shortcuts -->
          <div class="quick-shortcuts">
            <button class="shortcut-btn" data-query="Show me my stock ETF positions" data-translate="chat.shortcut.stockEtfs">üìà Stock ETFs</button>
            <button class="shortcut-btn" data-query="Show me my debt ETF positions" data-translate="chat.shortcut.debtEtfs">üíµ Debt ETFs</button>
            <button class="shortcut-btn" data-query="Show me my Bitcoin position" id="crypto-shortcut">‚Çø Cryptos</button>
            <button class="shortcut-btn" data-query="What's my cash balance?">üí∞ Cash</button>
            <button class="shortcut-btn" data-query="Show me my leverage">üìä Leverage</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Waitlist Modal -->
  <div id="waitlist-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3>Join the Bubble Waitlist</h3>
        <button class="modal-close" aria-label="Close modal">&times;</button>
      </div>
      <div class="modal-body">
        <p>Get early access to Bubble's AI investment platform.</p>
        <form id="waitlist-form-modal">
          <input type="email" placeholder="Enter your email" required />
          <button type="submit" class="btn-primary">Join Waitlist</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    // Enhanced initialization and modal functionality
    document.addEventListener('DOMContentLoaded', () => {
      // Quick shortcuts functionality
      document.querySelectorAll('.shortcut-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const query = btn.getAttribute('data-query');
          const input = document.getElementById('chatbot-input');
          input.value = query;
          input.focus();
        });
      });

      // Quick actions in sidebar
      document.querySelectorAll('.quick-action-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const input = document.getElementById('chatbot-input');
          const queries = {
            'üìä Portfolio Summary': 'Give me a complete portfolio summary',
            'üí∞ Check Balance': 'What\'s my current cash balance?',
            'üìà Recent Trades': 'Show me my recent trades this week',
            '‚ö†Ô∏è Alerts': 'Do I have any important alerts?'
          };
          input.value = queries[btn.textContent] || btn.textContent;
          input.focus();
        });
      });

      // Waitlist modal functionality
      const joinWaitlistBtn = document.getElementById('join-waitlist-btn');
      const learnMoreBtn = document.getElementById('learn-more-btn');
      const waitlistModal = document.getElementById('waitlist-modal');
      const modalClose = document.querySelector('.modal-close');

      if (joinWaitlistBtn) {
        joinWaitlistBtn.addEventListener('click', () => {
          waitlistModal.style.display = 'flex';
        });
      }

      if (learnMoreBtn) {
        learnMoreBtn.addEventListener('click', () => {
          // Link to main website or open info modal
          window.open('https://your-bubble-website.com', '_blank');
        });
      }

      if (modalClose) {
        modalClose.addEventListener('click', () => {
          waitlistModal.style.display = 'none';
        });
      }

      // Close modal on outside click
      waitlistModal?.addEventListener('click', (e) => {
        if (e.target === waitlistModal) {
          waitlistModal.style.display = 'none';
        }
      });

      // Waitlist form submission
      const waitlistForm = document.getElementById('waitlist-form-modal');
      if (waitlistForm) {
        waitlistForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          const email = e.target.querySelector('input[type="email"]').value;
          
          try {
            const response = await fetch('/api/waitlist', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ email, source: 'chatbot_app' })
            });
            
            if (response.ok) {
              alert('Successfully joined the waitlist!');
              waitlistModal.style.display = 'none';
            } else {
              alert('Failed to join waitlist. Please try again.');
            }
          } catch (error) {
            alert('Network error. Please try again.');
          }
        });
      }

      // Mobile sidebar toggle
      const sidebarToggle = document.createElement('button');
      sidebarToggle.className = 'sidebar-toggle';
      sidebarToggle.innerHTML = '‚ò∞';
      sidebarToggle.setAttribute('aria-label', 'Toggle sidebar');
      document.querySelector('.chatbot-header .header-left').appendChild(sidebarToggle);

      sidebarToggle.addEventListener('click', () => {
        document.getElementById('chatbot-sidebar').classList.toggle('mobile-visible');
      });
    });
  </script>
</body>
</html>