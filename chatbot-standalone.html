<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title>Bubble. Investment Assistant</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="chatbot-styles.css" />
  <link rel="icon" href="bubble-favicon.svg" type="image/svg+xml" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <script src="translations.js"></script>
  <script src="chatbot-logic.js" defer></script>
</head>
<body>
  <header class="chatbot-header">
    <div class="header-left">
      <div class="brand">
        <img src="bubble-logo-single.svg" alt="Bubble Logo" class="chatbot-logo" id="main-logo" />
        <span class="chatbot-title">Bubble.</span>
        <span class="chatbot-subtitle" id="chatbot-subtitle" data-translate="hero.tagline" style="font-style:italic;margin-left:1rem;"></span>
      </div>
    </div>
    
    <div class="header-center">
      <!-- Removed online status badge -->
    </div>
    
    <div class="header-right">
      <div class="language-switcher">
        <button id="en-switch" class="active">EN</button>
        <span>|</span>
        <button id="fr-switch">FR</button>
      </div>
      
      <div class="auth-buttons">
        <button class="btn-secondary" data-translate="header.signIn">Sign In</button>
        <button class="btn-primary" data-translate="header.login">Log In</button>
      </div>
      
      <div class="action-buttons">
        <button class="btn-accent btn-violet" id="join-waitlist-btn" data-translate="header.joinWaitlist">Join Waitlist</button>
        <button class="btn-outline" id="learn-more-btn" data-translate="header.learnMore">Learn More</button>
      </div>
      
      <!-- Profile & Settings Area -->
      <div class="profile-settings">
        <button class="profile-btn" id="profile-btn">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <circle cx="12" cy="8" r="5"/>
            <path d="M20 21v-2a7 7 0 0 0-14 0v2"/>
          </svg>
        </button>
        <div class="profile-dropdown" id="profile-dropdown">
          <div class="dropdown-item">
            <span data-translate="profile.plan">My Plan</span>
            <span class="plan-badge" data-translate="profile.free">Free</span>
          </div>
          <div class="dropdown-item">
            <span data-translate="profile.settings">Settings</span>
          </div>
          <div class="dropdown-item">
            <span data-translate="profile.notifications">Notification Preferences</span>
          </div>
          <div class="dropdown-divider"></div>
          <div class="dropdown-item">
            <span data-translate="profile.status">Status: Online</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="chatbot-layout">
    <aside class="chatbot-sidebar" id="chatbot-sidebar">
      <!-- Sidebar Toggle Button -->
      <button class="sidebar-toggle-btn" id="sidebar-toggle-btn">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
          <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
        </svg>
      </button>
      
      <!-- Enhanced History Section -->
      <div class="sidebar-section chatbot-history">
        <div class="section-header">
          <h3 data-translate="sidebar.history">Chat History</h3>
          <button id="new-chat-btn" class="btn-new-chat btn-violet" data-translate="sidebar.newChat">+ New Chat</button>
        </div>
        <div id="chatbot-history-list" class="history-list">
          <!-- History items will be populated by JavaScript -->
        </div>
      </div>
      
      <!-- Portfolio Widget -->
      <div class="sidebar-section chatbot-portfolio">
        <h3 data-translate="sidebar.portfolio">My Portfolio</h3>
        <div id="chatbot-portfolio-widget" class="portfolio-widget">
          <!-- Mock portfolio data for demo -->
          <div class="portfolio-stat">
            <span class="stat-label" data-translate="chatbot.portfolio.totalValue">Total Value</span>
            <span class="stat-value">$127,834.56</span>
            <span class="stat-change positive">+2.34%</span>
          </div>
          <div class="portfolio-stat">
            <span class="stat-label" data-translate="chatbot.portfolio.todaysPL">Today's P&L</span>
            <span class="stat-value">+$2,891.23</span>
            <span class="stat-change positive">+2.31%</span>
          </div>
          <div class="portfolio-stat">
            <span class="stat-label" data-translate="chatbot.portfolio.cash">Cash</span>
            <span class="stat-value">$8,234.12</span>
          </div>
        </div>
      </div>
      
      <!-- Quick Actions -->
      <div class="sidebar-section chatbot-quickactions">
        <h3 data-translate="chatbot.sidebar.quickactions">My Quick Actions</h3>
        <div id="chatbot-quickactions" class="quick-actions">
          <!-- Customize My Portfolio -->
          <button class="quick-action-btn" id="customize-portfolio-btn">
            <span class="sidebar-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
              </svg>
            </span>
            <span data-translate="quickaction.customize">Customize My Portfolio</span>
          </button>
          
          <!-- My Alerts -->
          <button class="quick-action-btn">
            <span class="sidebar-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 125" width="22" height="22">
                <path d="M96.0805283,75.8052826l-37.055481-62.3076477c-1.9071312-3.213995-5.3680573-5.1838341-9.1056633-5.1838341  c-3.7376099,0-7.1984444,1.9697466-9.1056633,5.1838341L3.9185569,75.8052826  c-1.8835053,3.2611847-1.8917675,7.2786026-0.0224507,10.5482559c1.8693218,3.2696457,5.3350806,5.3005905,9.1008263,5.3326569  h74.1109695c3.7469864-0.0685349,7.1793823-2.1139221,9.0227814-5.3774261  c1.843338-3.2636108,1.8243942-7.257431-0.0496292-10.5034866H96.0805283z M50.0530815,81.0989227  c-1.4037514,0-2.7508202-0.5577469-3.7433624-1.5502853c-0.9925385-0.9925385-1.5502777-2.3396072-1.5502777-3.7433548  c0-1.4037552,0.5577393-2.750824,1.5502777-3.7433624c0.9925423-0.9925385,2.3396111-1.5502777,3.7433624-1.5502777  s2.7508202,0.5577393,3.7433586,1.5502777s1.5502815,2.3396072,1.5502815,3.7433624  c0,1.4037476-0.5577431,2.7508163-1.5502815,3.7433548S51.4568329,81.0989227,50.0530815,81.0989227z M55.3467216,57.2775421  c0,1.8917656-1.0090904,3.6393051-2.6468201,4.5845947c-1.6377296,0.9452934-3.655941,0.9452934-5.2936401,0  c-1.6377029-0.9452896-2.6468201-2.692894-2.6468201-4.5845947V36.1029854c0-1.8917656,1.0090904-3.6393013,2.6468201-4.5845947  s3.6559372-0.9452934,5.2936401,0c1.6376991,0.9452934,2.6468201,2.6928902,2.6468201,4.5845947V57.2775421z"/>
              </svg>
            </span>
            <span data-translate="quickaction.alerts">My Alerts</span>
          </button>
          
          <!-- My Recent Trades -->
          <button class="quick-action-btn">
            <span class="sidebar-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="-5 -10 110 135" width="22" height="22">
                <path d="m89.379 59.859c-2.8711-1.2148-6.1875 0.12891-7.4062 3-5.1875 12.266-17.141 20.188-30.457 20.188-18.227 0-33.051-14.824-33.051-33.051 0-18.227 14.828-33.047 33.055-33.047 6.6953 0 13.113 2.0352 18.508 5.6797h-1.8438c-3.1172 0-5.6484 2.5312-5.6484 5.6484 0 3.1172 2.5312 5.6484 5.6484 5.6484h21.016l0.003906-21.016c0-3.1172-2.5312-5.6484-5.6484-5.6484-3.1172 0-5.6484 2.5312-5.6484 5.6484v1.4414c-7.5352-5.5781-16.75-8.6992-26.383-8.6992-24.457-0.003906-44.355 19.891-44.355 44.348s19.895 44.352 44.352 44.352c17.863 0 33.902-10.633 40.863-27.086 1.2148-2.875-0.12891-6.1875-3-7.4062z"/>
                <path d="m48.809 30.484c-2.3398 0-4.2383 1.8984-4.2383 4.2383v21.066l10.762 10.762c0.82422 0.82422 1.9102 1.2422 2.9961 1.2422s2.168-0.41406 2.9961-1.2422c1.6562-1.6562 1.6562-4.3398 0-5.9961l-8.2812-8.2812v-17.555c0-2.3398-1.8984-4.2383-4.2383-4.2383z"/>
              </svg>
            </span>
            <span data-translate="quickaction.trades">My Recent Trades</span>
          </button>
          
          <!-- My Strategies (Premium) -->
          <button class="quick-action-btn premium-feature" id="strategies-btn">
            <span class="sidebar-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 125" width="22" height="22">
                <path d="M50,10C27.9,10,10,27.9,10,50s17.9,40,40,40s40-17.9,40-50S72.1,10,50,10z M77.5,52.5h-25v25h-5v-25h-25v-5h25v-25h5v25h25V52.5z"/>
              </svg>
            </span>
            <div class="strategy-content">
              <span data-translate="quickaction.strategies">My Strategies</span>
              <span class="premium-subtitle" data-translate="quickaction.premium">Premium only ‚Äì build, deploy & share</span>
            </div>
          </button>
        </div>
        
        <!-- Upgrade CTA -->
        <button class="upgrade-plan-btn btn-violet" id="upgrade-plan-btn" data-translate="quickaction.upgrade">
          Upgrade My Plan
        </button>
      </div>
      
      <!-- Settings -->
      <div class="sidebar-section chatbot-settings">
        <h3 data-translate="chatbot.sidebar.settings">Settings</h3>
        <div id="chatbot-settings" class="settings-list">
          <button class="setting-item"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 90 112.5" width="22" height="22"><path d="M55.434,72.521c0,3.712-1.979,6.553-5.193,8.41c-3.213,1.856-7.172,1.856-10.379,0c-3.215-1.857-5.193-4.698-5.193-8.41"/><path d="M45.049,7.708c2.832,0,5.113,1.746,5.113,4.431c0,1.69,0.059,2.951,1.121,3.274c9.031,2.727,14.822,9.119,14.822,17.42  v13.952c0,6.392,2.615,7.686,5.906,10.131c4.766,3.535,3.678,10.896-1.791,10.891h-50.34c-5.469,0.005-6.557-7.356-1.791-10.891  c3.287-2.445,5.906-3.739,5.906-10.131V32.833c0-8.301,5.791-14.693,14.822-17.42c1.059-0.323,1.121-1.584,1.121-3.274  C39.939,9.454,42.221,7.708,45.049,7.708z"/></svg></span> <span data-translate="chatbot.settings.notifications">Notifications</span></button>
          <button class="setting-item"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 80" width="22" height="22"><g data-name="Paint Roller"><path d="M44.625,4.635h-32a1.9931,1.9931,0,0,0-2,2v11a1.99946,1.99946,0,0,0,2,2h32a2.00587,2.00587,0,0,0,2-2v-11A1.99943,1.99943,0,0,0,44.625,4.635Zm-28.37,3.69h-2a1,1,0,0,1,0-2h2A1,1,0,0,1,16.255,8.325Zm13.28,0h-10a1,1,0,0,1,0-2h10A1,1,0,0,1,29.535,8.325Z"/><path d="M53.375,15.385v7.38a5.00181,5.00181,0,0,1-5,5h-13.5a1.99943,1.99943,0,0,0-2,2v2.6h-4v-2.6a6.00476,6.00476,0,0,1,6-6h13.5a1.00291,1.00291,0,0,0,1-1v-7.38a.98767.98767,0,0,0-.75-.96v-4.03A4.99149,4.99149,0,0,1,53.375,15.385Z"/><path d="M35.375,55.295a4.29681,4.29681,0,0,1-4.5,4.07,4.29681,4.29681,0,0,1-4.5-4.07l1.07-19.98a1.007,1.007,0,0,1,1-.95h4.86a1.00692,1.00692,0,0,1,1,.95Z"/><path d="M18.99189,28.40844a2.64928,2.64928,0,1,1-5.29856,0c0-1.62478,2.133-3.51368,2.61325-5.46662a.03628.03628,0,0,1,.07206,0C16.85885,24.89476,18.99189,26.78366,18.99189,28.40844Z"/></g></svg></span> <span data-translate="chatbot.settings.theme">Theme</span></button>
          <button class="setting-item"><span class="sidebar-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 333.33 416.66" width="22" height="22"><g><path d="M117.86 142.4l97.61 0 0 -52.46c0,-26.84 -21.96,-48.81 -48.81,-48.81l0 0c-26.85,0 -48.81,21.96 -48.81,48.81l0 52.46zm130.31 2.54c20.87,6.8 36.07,26.48 36.07,49.54l0 78.32c0,28.65 -23.44,52.09 -52.09,52.09l-130.97 0c-28.65,0 -52.09,-23.44 -52.09,-52.09l0 -78.32c0,-23.06 15.2,-42.75 36.07,-49.54l0 -55c0,-44.82 36.68,-81.5 81.5,-81.5l0 0c44.83,0 81.5,36.68 81.5,81.5l0 55zm-81.5 38.77c-15.31,0 -27.73,12.42 -27.73,27.73 0,10.57 5.91,19.76 14.61,24.44l0 34.58c0,7.22 5.9,13.12 13.11,13.12l0 0c7.21,0 13.11,-5.9 13.11,-13.12l0 -34.58c8.7,-4.68 14.61,-13.87 14.61,-24.44 0,-15.31 -12.41,-27.73 -27.73,-27.73z"/></g></svg></span> <span data-translate="chatbot.settings.privacy">Privacy</span></button>
        </div>
      </div>
    </aside>

    <main class="chatbot-main">
      <!-- Enhanced Chat Container -->
      <section class="chatbot-chat-container" id="chatbot-chat-container" style="display:flex;">
        <div class="chatbot-main-question">
          <span class="main-question-hello" data-translate="chatbot.welcome.hello">Hello,</span> <span class="main-question-rest" data-translate="chatbot.welcome.help">how can I help you today?</span>
        </div>
        <div class="chatbot-main-subtext" data-translate="chatbot.welcome.description" style="text-align:center; font-size:1.1rem; color:var(--text-secondary); margin-bottom:1.5rem; max-width:600px; margin-left:auto; margin-right:auto;">
          I'm your personal AI investment manager. Ask me about your investments, recent trades, market positions, or any questions about your financial portfolio.
        </div>
        <div class="chatbot-feature-tiles" style="display:flex; justify-content:center; gap:1.5rem; margin-bottom:2rem; flex-wrap:wrap;">
          <div class="feature-item">
            <span class="feature-icon welcome-feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 80" width="32" height="32"><g><path d="M58.25,33H31.26V6.02c0-0.75-0.59-1.34-1.34-1.34c-16.36,0-29.66,13.31-29.66,29.66C0.26,50.69,13.57,64,29.92,64   c16.36,0,29.67-13.31,29.67-29.66C59.59,33.6,58.99,33,58.25,33z"/><path d="M34.08,0c-0.74,0-1.34,0.6-1.34,1.34v28.32c0,0.74,0.6,1.34,1.34,1.34H62.4c0.74,0,1.34-0.6,1.34-1.34   C63.74,13.31,50.43,0,34.08,0z"/></g></svg></span>
            <span data-translate="chatbot.feature.realtime">Real-time Portfolio Analysis</span>
          </div>
          <div class="feature-item">
            <span class="feature-icon welcome-feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="-5 -10 110 135" width="32" height="32"><g fill="black"><path d="m18.43 1.8359c0.14453-1.1133 1.7617-1.1133 1.9023 0 1.1055 8.668 7.9297 15.488 16.594 16.594 1.1172 0.14453 1.1172 1.7617 0 1.9023-8.6641 1.1055-15.488 7.9297-16.594 16.594-0.14062 1.1172-1.7578 1.1172-1.9023 0-1.1055-8.6641-7.9258-15.488-16.594-16.594-1.1133-0.14062-1.1133-1.7578 0-1.9023 8.668-1.1055 15.488-7.9258 16.594-16.594z"/><path d="m58.293 23.434c0.25781-2.0117 3.1719-2.0117 3.4258 0 2.3242 18.203 16.66 32.539 34.863 34.859 2.0117 0.25781 2.0117 3.1719 0 3.4258-18.203 2.3242-32.539 16.66-34.863 34.863-0.25391 2.0117-3.168 2.0117-3.4258 0-2.3203-18.203-16.656-32.539-34.859-34.863-2.0117-0.25391-2.0117-3.168 0-3.4258 18.203-2.3203 32.539-16.656 34.859-34.859z"/></g></svg></span>
            <span data-translate="chatbot.feature.ai">AI-Powered Insights</span>
          </div>
          <div class="feature-item">
            <span class="feature-icon welcome-feature-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 333.33 416.66" width="32" height="32"><g><path d="M117.86 142.4l97.61 0 0 -52.46c0,-26.84 -21.96,-48.81 -48.81,-48.81l0 0c-26.85,0 -48.81,21.96 -48.81,48.81l0 52.46zm130.31 2.54c20.87,6.8 36.07,26.48 36.07,49.54l0 78.32c0,28.65 -23.44,52.09 -52.09,52.09l-130.97 0c-28.65,0 -52.09,-23.44 -52.09,-52.09l0 -78.32c0,-23.06 15.2,-42.75 36.07,-49.54l0 -55c0,-44.82 36.68,-81.5 81.5,-81.5l0 0c44.83,0 81.5,36.68 81.5,81.5l0 55zm-81.5 38.77c-15.31,0 -27.73,12.42 -27.73,27.73 0,10.57 5.91,19.76 14.61,24.44l0 34.58c0,7.22 5.9,13.12 13.11,13.12l0 0c7.21,0 13.11,-5.9 13.11,-13.12l0 -34.58c8.7,-4.68 14.61,-13.87 14.61,-24.44 0,-15.31 -12.41,-27.73 -27.73,-27.73z"/></g></svg></span>
            <span data-translate="chatbot.feature.secure">Secure & Private</span>
          </div>
        </div>

        <!-- Chat Messages Area -->
        <div id="chatbot-message-list" class="chatbot-message-list" style="display: none;">
          <!-- Chat messages will appear here -->
        </div>

        <div class="chatbot-suggestions-tiles" id="chatbot-suggestions-tiles">
          <!-- Suggestion buttons will be populated by JavaScript -->
        </div>
        
        <!-- New Shortcut Buttons (shown after first interaction) -->
        <div class="chatbot-new-shortcuts" id="chatbot-new-shortcuts" style="display: none;">
          <div class="new-shortcuts-grid">
            <button class="new-shortcut-btn" data-query="Help me build a strategy" data-translate="shortcut.strategy">
              <span class="new-shortcut-icon">üß†</span>
              <span>Strategy Builder</span>
            </button>
            <button class="new-shortcut-btn" data-query="I need expert advice" data-translate="shortcut.expert">
              <span class="new-shortcut-icon">üí¨</span>
              <span>Expert</span>
            </button>
            <button class="new-shortcut-btn" data-query="Analyze my portfolio" data-translate="shortcut.analyst">
              <span class="new-shortcut-icon">üìä</span>
              <span>Analyst</span>
            </button>
            <button class="new-shortcut-btn" data-query="Automate my investments" data-translate="shortcut.auto">
              <span class="new-shortcut-icon">‚öôÔ∏è</span>
              <span>Auto</span>
            </button>
            <button class="new-shortcut-btn" id="guide-me-btn" data-query="Guide me through today's opportunities" data-translate="shortcut.guide">
              <span class="new-shortcut-icon">üß≠</span>
              <span>Guide Me</span>
            </button>
          </div>
        </div>

        <!-- Chatbot Status -->
        <div id="chatbot-status" class="chatbot-status" style="display: none;">
          <span class="status-text">AI is thinking...</span>
        </div>

        <div class="chatbot-input-row chatbot-input-row-rounded">
            <div class="input-container">
              <input 
                type="text" 
              class="chatbot-input chatbot-input-rounded" 
                id="chatbot-input" 
                placeholder="Ask about your portfolio performance, strategies, or market insights..." 
                data-translate="chat.placeholder" 
                aria-label="Ask about your investments" 
                autocomplete="off" 
              />
              <div class="input-status">
                <span class="typing-indicator" style="display: none;">
                  <span></span>
                  <span></span>
                  <span></span>
                </span>
              </div>
            </div>
          <button class="chatbot-send-btn chatbot-send-btn-rounded" id="chatbot-send-btn" aria-label="Send">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M5 10L12 3L19 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M12 21V4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
        </div>

        <!-- Chatbot Suggestions -->
        <div id="chatbot-suggestions" class="chatbot-suggestions" style="display: none;">
          <!-- Suggestion buttons will be populated by JavaScript -->
        </div>
      </section>
    </main>
  </div>

  <!-- Waitlist Modal -->
  <div id="waitlist-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h3 data-translate="modal.waitlist.title">Join the Bubble Waitlist</h3>
        <button class="modal-close" aria-label="Close modal">&times;</button>
      </div>
      <div class="modal-body">
        <p data-translate="modal.waitlist.description">Get early access to Bubble's AI investment platform.</p>
        <form id="waitlist-form-modal">
          <input type="email" data-translate="modal.waitlist.placeholder" placeholder="Enter your email" required />
          <button type="submit" class="btn-primary" data-translate="modal.waitlist.button">Join Waitlist</button>
        </form>
      </div>
    </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Language switcher functionality
      document.getElementById('en-switch')?.addEventListener('click', () => {
        setLanguage('en');
        document.getElementById('en-switch').classList.add('active');
        document.getElementById('fr-switch').classList.remove('active');
      });

      document.getElementById('fr-switch')?.addEventListener('click', () => {
        setLanguage('fr');
        document.getElementById('fr-switch').classList.add('active');
        document.getElementById('en-switch').classList.remove('active');
      });

      // Quick shortcuts functionality
      document.querySelectorAll('.shortcut-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const query = btn.getAttribute('data-query');
          const input = document.getElementById('chatbot-input');
          if (input && query) {
            input.value = query;
            input.focus();
          }
        });
      });

      // Quick actions in sidebar
      document.querySelectorAll('.quick-action-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const input = document.getElementById('chatbot-input');
          const sendBtn = document.getElementById('chatbot-send-btn');
          const queries = {
            'Customize My Portfolio': 'Help me customize my portfolio settings',
            'My Alerts': 'Do I have any important alerts?',
            'My Recent Trades': 'Show me my recent trades this week',
            'My Strategies': 'Show me my investment strategies'
          };
          const textContent = btn.textContent.trim();
          console.log('Quick action clicked:', textContent);
          if (input && sendBtn) {
            input.value = queries[textContent] || textContent;
            input.focus();
            // Trigger the send message
            console.log('Triggering send button click');
            sendBtn.click();
          } else {
            console.error('Input or send button not found');
          }
        });
      });

      // Waitlist modal functionality
      const joinWaitlistBtn = document.getElementById('join-waitlist-btn');
      const learnMoreBtn = document.getElementById('learn-more-btn');
      const waitlistModal = document.getElementById('waitlist-modal');
      const modalClose = document.querySelector('.modal-close');

      if (joinWaitlistBtn) {
        joinWaitlistBtn.addEventListener('click', () => {
          waitlistModal.style.display = 'flex';
        });
      }

      if (learnMoreBtn) {
        learnMoreBtn.addEventListener('click', () => {
          window.open('https://bubblewaitlist.replit.app/', '_blank');
        });
      }

      if (modalClose) {
        modalClose.addEventListener('click', () => {
          waitlistModal.style.display = 'none';
        });
      }

      // Close modal on outside click
      waitlistModal?.addEventListener('click', (e) => {
        if (e.target === waitlistModal) {
          waitlistModal.style.display = 'none';
        }
      });

      // Waitlist form submission with translation
      document.getElementById('waitlist-form-modal')?.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = e.target.querySelector('input[type="email"]').value;
        const message = getTranslatedText('notification.waitlistSuccess').replace('{email}', email);
        alert(message);
        waitlistModal.style.display = 'none';
      });

      // Initialize translations
      updateAllTranslations();
    });
  </script>
</body>
</html>